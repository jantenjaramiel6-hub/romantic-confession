<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romantic Confession</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet"> <!-- Added for cool font -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script> <!-- EmailJS CDN -->
</head>
<body>
    <div class="background-elements">
        <div class="rose rose1">ğŸŒ¹</div>
        <div class="rose rose2">ğŸŒ¹</div>
        <div class="rose rose3">ğŸŒ¹</div>
        <div class="chocolate chocolate1">ğŸ«</div>
        <div class="chocolate chocolate2">ğŸ«</div>
        <div class="chocolate chocolate3">ğŸ«</div>
    </div>
    <div class="container">
        <div class="question">Hey, I've been wanting to tell you this... Will you let me court you? ğŸ’•</div>
        <div class="boxes">
            <div class="box" data-response="You're already amazing so Let's get wonderful together! â¤ï¸" onclick="selectBox(this, 'yes')">
                <div class="emoji">ğŸ˜Š</div>
                YES
            </div>
            <div class="box" data-response="NO IS NOT AN OPTION ON THIS!" onclick="selectBox(this, 'no')">
                <div class="emoji">ğŸ˜¢</div>
                NO
            </div>
        </div>
        <div id="response" class="response"></div>
    </div>
    <div id="error-popup" class="error-popup" onclick="closePopup()">
        <div class="error-content">VIRUS, CHOOSE AGAIN !</div>
    </div>
    <div id="success-popup" class="success-popup" onclick="closeSuccessPopup()">
        <div class="success-content">
            <div class="items">
                <span class="item">ğŸ«</span>
                <span class="item">ğŸŒ¸</span>
                <span class="item">â¤ï¸</span>
            </div>
            <div class="thankful-message">Thank you! For giving me chance to go in your world, Let's Explore this wonderful life with eachother!</div>
        </div>
    </div>
    <script>
        // Initialize EmailJS with your public key
        emailjs.init("2nsTYKGYc2hNIsilR"); // Replace with your actual Public Key

        function selectBox(element, type) {
            // Remove selected class from all boxes
            document.querySelectorAll('.box').forEach(box => box.classList.remove('selected'));
            // Add selected class to clicked box
            element.classList.add('selected');
            
            // Get the response message from the data attribute
            const responseMessage = element.getAttribute('data-response');
            const responseDiv = document.getElementById('response');
            
            // Update and show the response
            responseDiv.textContent = responseMessage;
            responseDiv.style.opacity = '1';
            responseDiv.style.transform = 'translateY(0)';
            
            // Send the response to your email via EmailJS
            sendEmail(responseMessage, type);
            
            // If "Yes" is clicked, show the success popup
            if (type === 'yes') {
                const popup = document.getElementById('success-popup');
                popup.style.display = 'flex';
                setTimeout(() => {
                    popup.style.opacity = '1';
                }, 10); // Small delay for transition
                // Auto-close after 4 seconds
                setTimeout(() => {
                    closeSuccessPopup();
                }, 4000);
            }
            
            // If "No" is clicked, show the error popup
            if (type === 'no') {
                const popup = document.getElementById('error-popup');
                popup.style.display = 'flex';
                setTimeout(() => {
                    popup.style.opacity = '1';
                }, 10); // Small delay for transition
                // Auto-close after 3 seconds
                setTimeout(() => {
                    closePopup();
                }, 3000);
            }
        }
        
        function sendEmail(responseMessage, type) {
            const templateParams = {
                response: responseMessage,
                type: type, // Added to specify yes or no
                timestamp: new Date().toLocaleString(), // Current date/time
                to_email: "jantenjaramiel6@gmail.com" // Replace with your actual email address
            };
            
            emailjs.send("service_3c4j3pq", "template_yswjnkl", templateParams) // Replace with your Service ID and Template ID
                .then(function(response) {
                    console.log('Email sent successfully!', response.status, response.text);
                }, function(error) {
                    console.log('Failed to send email:', error);
                });
        }
        
        function closePopup() {
            const popup = document.getElementById('error-popup');
            popup.style.opacity = '0';
            setTimeout(() => {
                popup.style.display = 'none';
                resetSelection(); // Reset after "No" popup closes
            }, 500); // Match transition duration
        }
        
        function closeSuccessPopup() {
            const popup = document.getElementById('success-popup');
            popup.style.opacity = '0';
            setTimeout(() => {
                popup.style.display = 'none';
                // Do NOT reset after "Yes" popup closes - keep selection and response
            }, 500); // Match transition duration
        }
        
        function resetSelection() {
            // Remove selected class from all boxes
            document.querySelectorAll('.box').forEach(box => box.classList.remove('selected'));
            // Fade out the response message
            const responseDiv = document.getElementById('response');
            responseDiv.style.opacity = '0';
            responseDiv.style.transform = 'translateY(20px)';
        }
    </script>
</body>
</html>